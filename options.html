<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartText Options</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/options.css">
</head>
<body>
  <div class="options-container">
    <header class="options-header">
      <div class="logo">
        <img src="assets/icons/icon48.png" alt="SmartText Logo">
        <h1>SmartText Settings</h1>
      </div>
      <div class="version">v1.1.0</div>
    </header>

    <div class="options-content">
      <div class="tabs">
        <button class="tab-button active" data-tab="general">General</button>
        <button class="tab-button" data-tab="profiles">Writing Profiles</button>
        <button class="tab-button" data-tab="api">API Settings</button>
        <button class="tab-button" data-tab="keyboard">Keyboard Shortcuts</button>
        <button class="tab-button" data-tab="about">About</button>
      </div>

      <div class="tab-content">
        <!-- General Settings Tab -->
        <div id="general-tab" class="tab-panel active">
          <h2>General Settings</h2>
          
          <div class="setting-section">
            <h3>Display Options</h3>
            <div class="toggle-group">
              <label class="toggle-label">
                <span>Show Floating Menu on Text Selection</span>
                <div class="toggle-control">
                  <label class="switch">
                    <input type="checkbox" id="floating-menu-toggle" checked>
                    <span class="slider round"></span>
                  </label>
                </div>
              </label>
              <p class="setting-description">Display a formatting menu when you select text on any webpage.</p>
              
              <label class="toggle-label">
                <span>Show Fixed Action Button</span>
                <div class="toggle-control">
                  <label class="switch">
                    <input type="checkbox" id="fixed-button-toggle" checked>
                    <span class="slider round"></span>
                  </label>
                </div>
              </label>
              <p class="setting-description">Display a floating action button for quick access to SmartText features.</p>
              
              <label class="toggle-label">
                <span>Enable Keyboard Shortcuts</span>
                <div class="toggle-control">
                  <label class="switch">
                    <input type="checkbox" id="keyboard-shortcuts-toggle" checked>
                    <span class="slider round"></span>
                  </label>
                </div>
              </label>
              <p class="setting-description">Use keyboard shortcuts for quick formatting and AI features.</p>
            </div>
          </div>
          
          <div class="setting-section">
            <h3>Default Profile</h3>
            <div class="input-group">
              <label for="default-profile">Select Default Writing Profile</label>
              <select id="default-profile" class="form-control">
                <!-- Profiles will be loaded dynamically -->
              </select>
            </div>
            <p class="setting-description">This profile will be used by default for AI rewriting.</p>
          </div>
          
          <div class="setting-section">
            <h3>Advanced Settings</h3>
            <div class="input-group">
              <label for="max-tokens">Maximum Output Tokens</label>
              <input type="number" id="max-tokens" class="form-control" min="100" max="2000" value="800">
            </div>
            <p class="setting-description">Maximum length of text generated by AI (higher values may increase API costs).</p>
            
            <div class="input-group">
              <label for="temperature">AI Creativity (Temperature)</label>
              <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7" class="range-control">
              <div class="range-value"><span id="temperature-value">0.7</span></div>
            </div>
            <p class="setting-description">Lower values are more focused and deterministic, higher values are more creative.</p>
          </div>
          
          <div class="actions">
            <button id="reset-general" class="btn btn-secondary">Reset to Default</button>
            <button id="save-general" class="btn btn-primary">Save Changes</button>
          </div>
        </div>

        <!-- Profiles Tab -->
        <div id="profiles-tab" class="tab-panel">
          <h2>Writing Profiles</h2>
          
          <div class="profiles-section">
            <div class="profiles-header">
              <select id="profile-select" class="form-control">
                <!-- Profiles will be loaded dynamically -->
              </select>
              <div class="profile-actions">
                <button id="new-profile-btn" class="btn btn-icon" title="Create New Profile">+</button>
                <button id="delete-profile-btn" class="btn btn-icon btn-delete" title="Delete Profile">üóëÔ∏è</button>
              </div>
            </div>
            
            <div class="profile-editor">
              <div class="input-group">
                <label for="profile-name">Profile Name</label>
                <input type="text" id="profile-name" class="form-control" placeholder="Enter profile name">
              </div>
              
              <div class="input-group">
                <label for="profile-style">Writing Style</label>
                <select id="profile-style" class="form-control">
                  <option value="Professional">Professional</option>
                  <option value="Casual">Casual</option>
                  <option value="Creative">Creative</option>
                  <option value="Technical">Technical</option>
                  <option value="Persuasive">Persuasive</option>
                </select>
              </div>
              
              <div class="options-grid">
                <div class="checkbox-group">
                  <h4>Features</h4>
                  <label>
                    <input type="checkbox" id="profile-ux">
                    UX Writing Optimization
                  </label>
                  <p class="setting-description">Optimize for clarity, brevity, and user experience.</p>
                  
                  <label>
                    <input type="checkbox" id="profile-bias">
                    Persuasive Techniques
                  </label>
                  <p class="setting-description">Apply cognitive bias principles to make text more persuasive.</p>
                  
                  <label>
                    <input type="checkbox" id="profile-emoji">
                    Include Emojis
                  </label>
                  <p class="setting-description">Add contextually relevant emojis to enhance the text.</p>
                  
                  <label>
                    <input type="checkbox" id="profile-auto">
                    Auto-Rewrite on Selection
                  </label>
                  <p class="setting-description">Automatically rewrite text when selected (use with caution).</p>
                </div>
                
                <div class="cognitive-bias-section">
                  <h4>Cognitive Biases</h4>
                  <div class="checkbox-group biases-list">
                    <label>
                      <input type="checkbox" name="bias" value="social-proof">
                      Social Proof
                    </label>
                    <label>
                      <input type="checkbox" name="bias" value="scarcity">
                      Scarcity
                    </label>
                    <label>
                      <input type="checkbox" name="bias" value="authority">
                      Authority
                    </label>
                    <label>
                      <input type="checkbox" name="bias" value="pygmalion">
                      Pygmalion Effect
                    </label>
                  </div>
                  <p class="setting-description">Select specific biases to incorporate (requires Persuasive Techniques).</p>
                </div>
              </div>
              
              <div class="input-group full-width">
                <label for="custom-prompt">Custom Instructions</label>
                <textarea id="custom-prompt" class="form-control" placeholder="Add custom instructions for AI rewriting..."></textarea>
              </div>
              <p class="setting-description">Additional instructions to guide the AI when rewriting text with this profile.</p>
            </div>
            
            <div class="actions">
              <button id="reset-profile" class="btn btn-secondary">Reset</button>
              <button id="save-profile" class="btn btn-primary">Save Profile</button>
            </div>
          </div>
        </div>

        <!-- API Settings Tab -->
        <div id="api-tab" class="tab-panel">
          <h2>API Settings</h2>
          
          <div class="setting-section">
            <h3>OpenAI API Configuration</h3>
            
            <div class="input-group">
              <label for="api-key">API Key</label>
              <div class="api-key-input">
                <input type="password" id="api-key" class="form-control" placeholder="Enter your API key">
                <button id="toggle-api-key" class="btn btn-icon">üëÅÔ∏è</button>
              </div>
              <p class="setting-description">Your OpenAI API key (stored securely in your browser).</p>
            </div>
            
            <div class="input-group">
              <label for="api-url">API Endpoint URL</label>
              <input type="text" id="api-url" class="form-control" placeholder="https://api.openai.com/v1/chat/completions">
              <p class="setting-description">The API endpoint URL (for custom deployments or Azure OpenAI).</p>
            </div>
            
            <div class="input-group">
              <label for="model-select">Model</label>
              <select id="model-select" class="form-control">
                <option value="gpt-4o-mini">GPT-4o Mini</option>
                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                <option value="gpt-4-turbo">GPT-4 Turbo</option>
                <option value="custom">Custom Model</option>
              </select>
              <p class="setting-description">Select the AI model to use for text rewriting.</p>
            </div>
            
            <div class="input-group custom-model hidden">
              <label for="custom-model">Custom Model Name</label>
              <input type="text" id="custom-model" class="form-control" placeholder="Enter custom model name or ID">
              <p class="setting-description">For Azure OpenAI or other custom deployments.</p>
            </div>
          </div>
          
          <div class="setting-section">
            <h3>Test Connection</h3>
            <button id="test-api" class="btn btn-secondary">Test API Connection</button>
            <div id="api-status" class="api-status">
              <!-- Status will be updated dynamically -->
            </div>
          </div>
          
          <div class="actions">
            <button id="reset-api" class="btn btn-secondary">Reset to Default</button>
            <button id="save-api" class="btn btn-primary">Save API Settings</button>
          </div>
        </div>

        <!-- Keyboard Shortcuts Tab -->
        <div id="keyboard-tab" class="tab-panel">
          <h2>Keyboard Shortcuts</h2>
          
          <div class="shortcuts-info">
            <p>These keyboard shortcuts work on any webpage. Click on a shortcut to edit it.</p>
            <p class="note">Note: Some shortcuts may conflict with browser or website shortcuts.</p>
          </div>
          
          <div class="shortcuts-list">
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Rewrite with AI</div>
                <div class="shortcut-description">Rewrite selected text using AI</div>
              </div>
              <div class="shortcut-keys" data-command="open_ai_rewrite">Ctrl+Shift+H</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Show AI Panel</div>
                <div class="shortcut-description">Open the AI writing panel</div>
              </div>
              <div class="shortcut-keys" data-command="open_ai_panel">Ctrl+Shift+P</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Format Menu</div>
                <div class="shortcut-description">Show text formatting menu</div>
              </div>
              <div class="shortcut-keys" data-command="format_text">Ctrl+Shift+F</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Emoji Menu</div>
                <div class="shortcut-description">Show emoji insertion menu</div>
              </div>
              <div class="shortcut-keys" data-command="insert_emoji">Ctrl+Shift+E</div>
            </div>
          </div>
          
          <h3>Text Formatting Shortcuts</h3>
          <div class="shortcuts-info">
            <p>These shortcuts work in text fields and editable areas.</p>
          </div>
          
          <div class="shortcuts-list">
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Bold</div>
                <div class="shortcut-description">Make selected text bold</div>
              </div>
              <div class="shortcut-keys static">Ctrl+B</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Italic</div>
                <div class="shortcut-description">Make selected text italic</div>
              </div>
              <div class="shortcut-keys static">Ctrl+I</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Strikethrough</div>
                <div class="shortcut-description">Add strikethrough to selected text</div>
              </div>
              <div class="shortcut-keys static">Ctrl+E</div>
            </div>
            
            <div class="shortcut-item">
              <div class="shortcut-info">
                <div class="shortcut-name">Code</div>
                <div class="shortcut-description">Format selected text as code</div>
              </div>
              <div class="shortcut-keys static">Ctrl+K</div>
            </div>
          </div>
          
          <div class="actions">
            <button id="reset-shortcuts" class="btn btn-secondary">Reset to Default</button>
            <button id="save-shortcuts" class="btn btn-primary">Save Shortcuts</button>
          </div>
        </div>

        <!-- About Tab -->
        <div id="about-tab" class="tab-panel">
          <h2>About SmartText</h2>
          
          <div class="about-section">
            <div class="about-logo">
              <img src="assets/icons/icon128.png" alt="SmartText Logo">
              <h3>SmartText v1.1.0</h3>
            </div>
            
            <p>SmartText is a browser extension that helps improve your writing with AI-powered rewriting, 
            formatting tools, and emoji support. Works on any website with editable text fields.</p>
            
            <h3>Features</h3>
            <ul>
              <li><strong>Text Formatting</strong> - Quick markdown formatting with a floating menu</li>
              <li><strong>AI Rewriting</strong> - Improve your writing with AI assistance</li>
              <li><strong>Custom Profiles</strong> - Different styles for different writing contexts</li>
              <li><strong>Emoji Picker</strong> - Easily insert emojis into any text field</li>
            </ul>
            
            <h3>Privacy</h3>
            <p>SmartText values your privacy:</p>
            <ul>
              <li>Your API key is stored locally in your browser</li>
              <li>Your text is sent directly to the OpenAI API from your browser</li>
              <li>We don't collect or store any of your text or data</li>
              <li>All settings are stored locally on your device</li>
            </ul>
            
            <h3>Support</h3>
            <p>If you need help or want to report an issue:</p>
            <div class="support-links">
              <a href="https://github.com/yourusername/smarttext/issues" target="_blank" class="btn btn-secondary">Report Issue</a>
              <a href="mailto:support@example.com" class="btn btn-secondary">Contact Support</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="options-footer">
      <p>&copy; 2025 SmartText - All Rights Reserved</p>
    </footer>
  </div>

  <!-- Modals -->
  <div id="new-profile-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create New Profile</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <label for="new-profile-name">Profile Name</label>
          <input type="text" id="new-profile-name" class="form-control" placeholder="Enter profile name">
        </div>
        <div class="input-group">
          <label for="new-profile-base">Base on Existing</label>
          <select id="new-profile-base" class="form-control">
            <!-- Profiles will be loaded dynamically -->
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancel</button>
        <button id="create-profile-btn" class="btn btn-primary">Create</button>
      </div>
    </div>
  </div>

  <div id="delete-profile-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Delete Profile</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the profile <strong id="delete-profile-name">Profile Name</strong>?</p>
        <p class="warning-text">This action cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancel</button>
        <button id="confirm-delete-btn" class="btn btn-delete">Delete</button>
      </div>
    </div>
  </div>

  <div id="shortcut-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Keyboard Shortcut</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p>Press the keys you want to use for "<span id="shortcut-name">Action</span>"</p>
        <div id="shortcut-recorder" class="shortcut-recorder">
          Press a shortcut...
        </div>
        <p class="shortcut-hint">Press Escape to cancel or Backspace to clear</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancel</button>
        <button id="save-shortcut-btn" class="btn btn-primary">Save Shortcut</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="scripts/options.js" type="module"></script>
</body>
</html>